if DEF(DEBUG)
MoveTable:
	; RBYGSC moves
;	dw KARATE_CHOP
;	dw DOUBLE_SLAP
;	dw PAY_DAY
;	dw FIRE_PUNCH
;	dw ICE_PUNCH
;	dw THUNDERPUNCH
;	dw SCRATCH
;	dw SWORDS_DANCE
;	dw CUT
;	dw GUST
;	dw WING_ATTACK
;	dw FLY
;	dw VINE_WHIP
;	dw STOMP
;	dw DOUBLE_KICK
;	dw HEADBUTT
;	dw HORN_ATTACK
;	dw TACKLE
;	dw BODY_SLAM
;	dw WRAP
;	dw TAKE_DOWN
;	dw THRASH
;	dw DOUBLE_EDGE
;	dw POISON_STING
;	dw PIN_MISSILE
;	dw LEER
;	dw BITE
;	dw GROWL
;	dw ROAR
;	dw SING
;	dw SUPERSONIC
;	dw SONIC_BOOM
;	dw DISABLE
;	dw ACID
;	dw EMBER
;	dw FLAMETHROWER
;	dw WATER_GUN
;	dw HYDRO_PUMP
;	dw SURF
;	dw ICE_BEAM
;	dw BLIZZARD
;	dw PSYBEAM
;	dw BUBBLE_BEAM
;	dw AURORA_BEAM
;	dw HYPER_BEAM
;	dw PECK
;	dw DRILL_PECK
;	dw LOW_KICK
;	dw COUNTER
;	dw SEISMIC_TOSS
;	dw STRENGTH
;	dw ABSORB
;	dw MEGA_DRAIN
;	dw LEECH_SEED
;	dw GROWTH
;	dw RAZOR_LEAF
;	dw SOLAR_BEAM
;	dw POISONPOWDER
;	dw STUN_SPORE
;	dw SLEEP_POWDER
;	dw PETAL_DANCE
;	dw STRING_SHOT
;	dw DRAGON_RAGE
;	dw FIRE_SPIN
;	dw THUNDERSHOCK
;	dw THUNDERBOLT
;	dw THUNDER_WAVE
;	dw THUNDER
;	dw ROCK_THROW
;	dw EARTHQUAKE
;	dw DIG
;	dw TOXIC
;	dw CONFUSION
;	dw PSYCHIC_M
;	dw HYPNOSIS
;	dw AGILITY
;	dw QUICK_ATTACK
;	dw RAGE
;	dw TELEPORT
;	dw NIGHT_SHADE
;	dw SCREECH
;	dw DOUBLE_TEAM
;	dw RECOVER
;	dw MINIMIZE
;	dw SMOKESCREEN
;	dw CONFUSE_RAY
;	dw DEFENSE_CURL
;	dw BARRIER
;	dw LIGHT_SCREEN
;	dw HAZE
;	dw REFLECT
;	dw FOCUS_ENERGY
;	dw METRONOME
;	dw LICK
;	dw FIRE_BLAST
;	dw WATERFALL
;	dw SWIFT
;	dw AMNESIA
;	dw FRESH_SNACK
;	dw HI_JUMP_KICK
;	dw GLARE
;	dw DREAM_EATER
;	dw LEECH_LIFE
;	dw TRANSFORM
;	dw DIZZY_PUNCH
;	dw SPORE
;	dw FLASH
;	dw SPLASH
;	dw CRABHAMMER
;	dw EXPLOSION
;	dw FURY_STRIKES
;	dw BONEMERANG
;	dw REST
;	dw ROCK_SLIDE
;	dw HYPER_FANG
;	dw CONVERSION
;	dw TRI_ATTACK
	dw SUPER_FANG
	dw SLASH
	dw SUBSTITUTE
	dw SKETCH
	dw THIEF
	dw CURSE
	dw AEROBLAST
	dw REVERSAL
	dw PROTECT
	dw MACH_PUNCH
	dw SCARY_FACE
	dw FEINT_ATTACK
	dw SWEET_KISS
	dw BELLY_DRUM
	dw SLUDGE_BOMB
	dw MUD_SLAP
	dw OCTAZOOKA
	dw SPIKES
	dw ZAP_CANNON
	dw FORESIGHT
	dw DESTINY_BOND
	dw PERISH_SONG
	dw ICY_WIND
	dw OUTRAGE
	dw SANDSTORM
	dw GIGA_DRAIN
	dw ENDURE
	dw CHARM
	dw ROLLOUT
	dw FALSE_SWIPE
	dw SWAGGER
	dw SPARK
	dw STEEL_WING
	dw MEAN_LOOK
	dw ATTRACT
	dw SLEEP_TALK
	dw HEAL_BELL
	dw RETURN
	dw SAFEGUARD
	dw PAIN_SPLIT
	dw SACRED_FIRE
	dw MAGNITUDE
	dw DYNAMICPUNCH
	dw MEGAHORN
	dw DRAGONBREATH
	dw BATON_PASS
	dw ENCORE
	dw PURSUIT
	dw RAPID_SPIN
	dw IRON_TAIL
	dw METAL_CLAW
	dw HEALINGLIGHT
	dw HIDDEN_POWER
	dw CROSS_CHOP
	dw RAIN_DANCE
	dw SUNNY_DAY
	dw CRUNCH
	dw MIRROR_COAT
	dw EXTREMESPEED
	dw ANCIENTPOWER
	dw SHADOW_BALL
	dw FUTURE_SIGHT
	dw ROCK_SMASH
	dw WHIRLPOOL

;- gen3 moves
	dw HAIL
	dw WILL_O_WISP
	dw FACADE
	dw TRICK
	dw KNOCK_OFF
	dw SKILL_SWAP
	dw HYPER_VOICE
	dw ASTONISH
	dw EXTRASENSORY
	dw AERIAL_ACE
	dw ICICLE_SPEAR
	dw DRAGON_CLAW
	dw BULK_UP
	dw CALM_MIND
	dw DRAGON_DANCE
	dw ROCK_BLAST
	dw WATER_PULSE

;- gen4 moves
	dw ROOST
	dw GYRO_BALL
	dw U_TURN
	dw CLOSE_COMBAT
	dw SUCKER_PUNCH
	dw TOXIC_SPIKES
	dw FLARE_BLITZ
	dw AURA_SPHERE
	dw POISON_JAB
	dw DARK_PULSE
	dw NIGHT_SLASH
	dw AQUA_TAIL
	dw SEED_BOMB
	dw AIR_SLASH
	dw X_SCISSOR
	dw BUG_BUZZ
	dw DRAGON_PULSE
	dw POWER_GEM
	dw DRAIN_PUNCH
	dw FOCUS_BLAST
	dw ENERGY_BALL
	dw BRAVE_BIRD
	dw EARTH_POWER
	dw GIGA_IMPACT
	dw NASTY_PLOT
	dw BULLET_PUNCH
	dw AVALANCHE
	dw ICE_SHARD
	dw SHADOW_CLAW
	dw ZEN_HEADBUTT
	dw FLASH_CANNON
	dw TRICK_ROOM
	dw POWER_WHIP
	dw GUNK_SHOT
	dw IRON_HEAD
	dw STONE_EDGE
	dw BUG_BITE
	dw AQUA_JET

;- gen5 moves
	dw HONE_CLAWS
	dw VENOSHOCK
	dw FLAME_CHARGE
	dw SCALD
	dw SHELL_SMASH
	dw HEX
	dw ACROBATICS
	dw VOLT_SWITCH
	dw BULLDOZE
	dw WILD_CHARGE
	dw PSYSTRIKE
	dw HURRICANE
	dw ICICLE_CRASH

;- gen6 moves
	dw DISARM_VOICE
	dw DRAINING_KISS
	dw PLAY_ROUGH
	dw MOONBLAST
	dw DAZZLINGLEAM
	dw NO_MOVE

DisplayUsedMoveText:
;	jr .no_animate_all_moves ; comment this out for testing all move animations
	ld de, MoveTable
.loop
	ld a, BATTLE_VARS_MOVE
	call GetBattleVarAddr
	ld a, [de]
	ld c, a
	inc de
	ld a, [de]
	ld b, a
	inc de
	or c
	ret z
	push hl
	ld h, b
	ld l, c
	call GetMoveIDFromIndex
	pop hl
	ld [hl], a

	call GetMoveIndexFromID
	cphl SOLAR_BEAM
	jr z, .chargeup_moves
	cphl DIG
	jr z, .chargeup_moves
	cphl CURSE
	jr z, .chargeup_moves
	cphl FLY
	jr z, .chargeup_moves
	cphl SUBSTITUTE
	jr nz, .done_special_handling

	call .DoMoveAnim
	push hl
	push de
	ld a, BATTLE_VARS_SUBSTATUS4
	call GetBattleVarAddr
	ld a, [hl]
	push hl
	push af
	set SUBSTATUS_SUBSTITUTE, [hl]
	farcall BattleCommand_lowersub
	pop af
	pop hl
	ld [hl], a
	pop de
	pop hl
	jr .loop

.chargeup_moves
	ld a, 1
	ld [wBattleAnimParam], a
	call .DoMoveAnim
	xor a
	ld [wBattleAnimParam], a
	; fallthrough
.done_special_handling
	call .DoMoveAnim
	jr .loop

.DoMoveAnim
	push hl
	push de
	farcall UpdateMoveData
	call .no_animate_all_moves
	farcall AnimateCurrentMove
	pop de
	pop hl
	ret

.no_animate_all_moves
else
DisplayUsedMoveText:
endc
	ld a, BATTLE_VARS_SUBSTATUS2
	call GetBattleVar
	bit SUBSTATUS_IN_ABILITY, a
	ret nz

	ldh a, [hBattleTurn]
	and a
	jr nz, .start

	ld a, [wPlayerMoveStruct + MOVE_ANIM]
	call UpdateUsedMoves

.start
	ld a, BATTLE_VARS_LAST_MOVE
	call GetBattleVarAddr

	ld a, BATTLE_VARS_MOVE_ANIM
	call GetBattleVar
	ld [wMoveGrammar], a

	; Skip last move update if move was called (1=called, 2=Power Herb)
	ldh a, [hBattleTurn]
	and a
	ld a, [wPlayerCharging]
	jr z, .got_charging
	ld a, [wEnemyCharging]
.got_charging
	dec a
	jr z, .charging

	; update last move
	push hl
	ld a, BATTLE_VARS_LAST_COUNTER_MOVE
	call GetBattleVarAddr
	ld a, [wMoveGrammar]
	ld [hl], a
	pop hl
	ld [hl], a

.charging
	; check obedience
	ld hl, UsedMoveText
	ld a, [wAlreadyDisobeyed]
	and a
	jr z, .ok
	ld hl, UsedMoveInsteadText
.ok
	call StdBattleTextbox
	jmp ApplyTilemapInVBlank

UpdateUsedMoves:
; append move a to wPlayerUsedMoves unless it has already been used

	push bc
; start of list
	ld hl, wPlayerUsedMoves
; get move id
	ld b, a
; next count
	ld c, NUM_MOVES

.loop
; get move from the list
	ld a, [hli]
; not used yet?
	and a
	jr z, .add
; already used?
	cp b
	jr z, .quit
; next byte
	dec c
	jr nz, .loop

; if the list is full and the move hasn't already been used
; shift the list back one byte, deleting the first move used
; this can occur with struggle or a new learned move
	ld hl, wPlayerUsedMoves + 1
; 1 = 2
	ld a, [hld]
	ld [hli], a
; 2 = 3
	inc hl
	ld a, [hld]
	ld [hli], a
; 3 = 4
	inc hl
	ld a, [hld]
	ld [hl], a
; 4 = new move
	ld a, b
	ld [wPlayerUsedMoves + 3], a
	jr .quit

.add
; go back to the byte we just inced from
	dec hl
; add the new move
	ld [hl], b

.quit
; list updated
	pop bc
	ret
